from httpx import AsyncClient
from app.core.config import settings
from app.tg_bot.utils import pluralize_appointments


async def bot_send_message(client: AsyncClient, chat_id: int, text: str, kb: list | None = None):
    send_data = {'chat_id': chat_id, 'text': text, 'parse_mode': 'HTML'}
    if kb:
        send_data['reply_markup'] = {'inline_keyboard': kb}
    await client.post(f"{settings.get_tg_api_url()}/sendMessage", json=send_data)


async def call_answer(client: AsyncClient, callback_query_id: int, text: str):
    await client.post(
        f"{settings.get_tg_api_url()}/answerCallbackQuery", json={"callback_query_id": callback_query_id, "text": text}
    )


def get_greeting_text(first_name: str):
    return f"""
            üè• <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –∫–ª–∏–Ω–∏–∫–∏ "–ó–¥–æ—Ä–æ–≤—å–µ–ü–ª—é—Å"!</b>

            –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <b>{first_name}</b>! üëã

            –ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–∞–ø–∏—Å–∏ –∫ –≤—Ä–∞—á–∞–º. –ó–¥–µ—Å—å –≤—ã —Å–º–æ–∂–µ—Ç–µ:

            ‚úÖ –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º –∫ –ª—é–±–æ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É
            üóì –£–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏
            ‚ÑπÔ∏è –ü–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö

            <i>–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ - –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç!</i>

            –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é –Ω–∏–∂–µ üëá
            """


def get_about_text():
    return """
        üè• <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–ª–∏–Ω–∏–∫—É "–ó–¥–æ—Ä–æ–≤—å–µ–ü–ª—é—Å"!</b>

        –ú—ã ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–Ω–æ–≥–æ–ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å 2000 –≥–æ–¥–∞ –∑–∞–±–æ—Ç–∏—Ç—Å—è –æ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–∞—à–∏—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤. –ù–∞—à–∞ –º–∏—Å—Å–∏—è ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —É—Å–ª—É–≥–∏ —Å –∑–∞–±–æ—Ç–æ–π –∏ –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ –∫–∞–∂–¥–æ–º—É.

        üåü <b>–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?</b>

        ‚úÖ <b>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º:</b> –í –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Ä–∞—á–∏ –≤—ã—Å—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º.
        üè• <b>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</b> –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤–µ–π—à–µ–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ—á–Ω–æ–π –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∏–∞–≥–Ω–æ–∑–∞.
        ‚è∞ <b>–£–¥–æ–±—Å—Ç–≤–æ:</b> –ö–ª–∏–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 8:00 –¥–æ 20:00, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è.
        üìç <b>–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</b> –ù–∞—à –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–∞–º–æ–º —Å–µ—Ä–¥—Ü–µ –≥–æ—Ä–æ–¥–∞, —Å —É–¥–æ–±–Ω–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é.
        üí° <b>–®–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä —É—Å–ª—É–≥:</b> –û—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–æ –ª–µ—á–µ–Ω–∏—è ‚Äî –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–∞—à–µ–º—É –∑–¥–æ—Ä–æ–≤—å—é.

        üìã <b>–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</b>
        ‚Ä¢ –¢–µ—Ä–∞–ø–∏—è
        ‚Ä¢ –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è
        ‚Ä¢ –ù–µ–≤—Ä–æ–ª–æ–≥–∏—è
        ‚Ä¢ –ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è
        ‚Ä¢ –£—Ä–æ–ª–æ–≥–∏—è
        ‚Ä¢ –ü–µ–¥–∏–∞—Ç—Ä–∏—è
        ‚Ä¢ –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è

        üí¨ <i>–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ ‚Äî –Ω–∞—à –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç. –ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è —Å–¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π –≤–∏–∑–∏—Ç –≤ –Ω–∞—à—É –∫–ª–∏–Ω–∏–∫—É –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–º.</i>

        üìÖ –ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º –∏–ª–∏ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–µ–Ω—é –±–æ—Ç–∞. –ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–º–æ—á—å –≤–∞–º!
        """


def get_booking_text(appointment_count):
    if appointment_count > 0:
        message_text = f"""
                        üìÖ <b>–í–∞—à–∏ –∑–∞–ø–∏—Å–∏ –∫ –≤—Ä–∞—á–∞–º</b>

                        –£ –≤–∞—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ <b>{appointment_count}</b> {pluralize_appointments(appointment_count)}.

                        –ß—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –≤–∞—à–∏—Ö –∑–∞–ø–∏—Å–µ–π, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å–∏" –Ω–∏–∂–µ.
                        """
    else:
        message_text = """
                    üìÖ <b>–í–∞—à–∏ –∑–∞–ø–∏—Å–∏ –∫ –≤—Ä–∞—á–∞–º</b>

                    –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —É –≤–∞—Å –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–µ–º–æ–≤.

                    –ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ –≤—Ä–∞—á—É, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–æ–π "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é.
                    """
    return message_text



